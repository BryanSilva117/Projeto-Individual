<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="./img/DCLOGO3.png">
    <title>Detective Comics Herois</title>
    <link rel="stylesheet" href="./css/quizP.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Oswald&display=swap" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Comic+Neue:ital@1&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.18.1/moment.min.js"></script>

    <script src="./js/funcoes.js"></script>

</head>

<body>

    <header class="header">

        <div class="fechar" id="diminuir">
            <a onclick="fechar()">
                <img src="https://cdn-icons-png.flaticon.com/512/56/56763.png" alt="" width="30px">
            </a>
        </div>

        <div class="logo">
            <a href="./index.html">
                <img src="./img/DCLOGO3.png" alt="LOGOPG">
            </a>
        </div>

        <div class="sair">
            <a href="./index.html" title="Voltar para o Inicio"><img
                    src="https://cdn-icons-png.flaticon.com/512/1828/1828479.png" alt="" width="30px"></a>
        </div>



    </header>

    <div class="inicio">
        <div class="lateral1" id="lateralI" style="margin-left: 0vh;">
            <div class="lateral">
                <div>
                    <h1>Quiz Do Charada
                    </h1>
                    <br>
                    <a href="./hero.html">Voltar</a>
                    <br><br>
                </div>
                <h1>Equipes DC</h1>
                <br>
                <br>

                <div>
                    <a href="hero.html#justice">Liga da Justiça</a>
                    <br>
                    <a href="hero.html#justiceSombira">Liga da Justisa Sombria</a>
                    <br>
                    <a href="hero.html#Sociedade">Sociedade da Justiça</a>
                    <br>
                    <a href="hero.html#JusticeJovem">Justiça Jovem</a>
                    <br>
                    <a href="hero.html#JovensTita">Jovens Titã</a>
                    <br>
                    <a href="hero.html#FamíliaMarvel">Família Marvel</a>
                    <br><br>
                    <h1>Vilões/Anti-Herois</h1>
                    <br>
                    <a href="hero.html#leagueIn">Liga da Injustiça</a>
                    <br>
                    <a href="hero.html#suicideScquade">Esquadrão Suicida</a>
                    <br><br>
                    <h1>Interação</h1>
                    <br>
                    <a href="./DashPerso.html">Dash Herois JL Pref</a>
                    <br><br>

                </div>
            </div>
        </div>

        <div>
            <div>
                <br>
                <br>
                <ul>
                    <div class="reponda" id="responder" style="margin-left: 76vh; display: block;">

                        <h1>Charada Hackeou o Site!!!</h1>
                        <br>
                        <h2>Responda as perguntas do Chadara<br>
                            para o Batman conseguir capturar ele</h3>
                            <img src="https://media.tenor.com/--AQwe1rA8EAAAAi/batman-pixel-art.gif" alt=""
                                width="300px">
                            <br><br>

                            <button onclick="responder()">Responder</button>
                    </div>



                    <div class="repondaQ" id="RespostaQ" style="margin-left: 76vh; display: none; position: absolute; position: fixed;">
                        <h1 id="tituloQ">O CHARADA ESCAPOU!!!</h1>
                        <br>
                        <h2>
                            Agora o batman está triste<br>
                            porque você só acertou ${calulo} das perguntas do charada
                        </h2>
                       <br><br>
                        
                        <div class="gif"><img src="https://gifs.eco.br/wp-content/uploads/2021/09/sad-batman-gifs-2.gif" alt=""></div>
                        <button onclick="respNova()">Tentar Novamente</button> <button onclick="DashQ()">Ver Resultado</button>
                    </div>



                    <div class="quizH" id="quizH" style="display: none; margin-left: 57vh;">
                        <h1><span>Responda as Perguntas do Charada</span></h1>
                        <br>
                        <h3>Quando você me tem, quer compartilhar-me. Quando compartilha comigo, não me tem mais.<br> O que
                            sou eu?</h3>
                        <br>
                        <select class="OpcoesR" id="pergunta_1">
                            <option value="" disabled selected hidden>Escolher</option>
                            <option value="0">Amizade</option>
                            <option value="0">Amor</option>
                            <option value="0">Solidão</option>
                            <option value="1">Segredo</option>
                            <option value="0">Memória</option>
                            <option value="0">Esperança</option>
                        </select><br>
                        <br>

                        <h3>Posso ocupar uma sala ou apenas um coração. <br>
                            Outros podem me ter, mas não posso ser
                            divididos, o que sou eu?</h3>
                        <br>
                        <select class="OpcoesR" id="pergunta_5">
                            <option value="" disabled selected hidden>Escolher</option>
                            <option value="0">A esperança</option>
                            <option value="0">A luz</option>
                            <option value="0">O fogo</option>
                            <option value="0"> A vida</option>
                            <option value="1">Solidão</option>
                            <option value="0"> A água</option>
                        </select><br><br>
                        
                        <h3>O que é tão frágil que pode ser quebrado apenas ao ser mencionado?</h3>
                        <br><br>
                        <select class="OpcoesR" id="pergunta_3">
                            <option value="" disabled selected hidden>Escolher</option>
                            <option value="0">O vidro</option>
                            <option value="0">O tempo</option>
                            <option value="0">A paciência</option>
                            <option value="0">A memória</option>
                            <option value="0">A raiva</option>
                            <option value="1">O silêncio</option>
                        </select><br><br>


                        <h3> Posso trazer lágrimas em seu rosto, sou criado<br>
                            em um instante mas duro a vida toda, o que
                            eu sou?</h3>
                        <br>
                        <select class="OpcoesR" id="pergunta_4">
                            <option value="" disabled selected hidden>Escolher</option>
                            <option value="0">Raiva</option>
                            <option value="0">Medo</option>
                            <option value="1">Memórias</option>
                            <option value="0">Lápis</option>
                            <option value="0">Paciência</option>
                            <option value="0">tempo</option>
                        </select><br><br>


                        <h3>O que é que quanto mais se tira, maior fica?</h3>
                        <br>
                        <select class="OpcoesR" id="pergunta_2">
                            <option value="" disabled selected hidden>Escolher</option>
                            <option value="0">Régua</option>
                            <option value="0">Tinta</option>
                            <option value="1">Buraco</option>
                            <option value="0">Borracha</option>
                            <option value="0">Ar</option>
                            <option value="0">Nada</option>
                        </select><br><br>



                        <button onclick="concluir()">Terminar</button>
                    </div>


                </ul>

                
            </div>
        </div>
    </div>
</body>

<script>
    var fk = sessionStorage.ID_USUARIO

    console.log(fk)


    function responder() {
        var quizH = document.getElementById('quizH')
        var resposta = document.getElementById('responder')

        if (resposta.style.display = 'block') {
            resposta.style.display = 'none'
            quizH.style.display = 'block'
        }
        else {
            resposta.style.display = 'block'
            quizH.style.display = 'none'
        }
    }


    function fechar() {
        var lateral = document.getElementById('lateralI')
        var margin = document.getElementById('diminuir')
        var quizH = document.getElementById('quizH')
        var resposta = document.getElementById('responder')

        var respostaQ = document.getElementById('RespostaQ')

        if (lateral.style.marginLeft == '0vh') {
            lateral.style.marginLeft = '-40vh'
            margin.style.marginLeft = '2vh'
            quizH.style.marginLeft = '39vh'
            resposta.style.marginLeft = '60vh'
            respostaQ.style.marginLeft = '60vh'
        } else {
            lateral.style.marginLeft = '0vh'
            margin.style.marginLeft = '37vh'
            quizH.style.marginLeft = '57vh'
            resposta.style.marginLeft = '76vh'
            respostaQ.style.marginLeft = '76vh'
        }
    }

    function respNova() {
        var respostaQ = document.getElementById('RespostaQ')

        if (respostaQ.style.display == 'block') {
            
            respostaQ.style.display = 'none'
        }
    }


    function concluir() {
        var resposta1 = pergunta_1.value
        var resposta2 = pergunta_2.value
        var resposta3 = pergunta_3.value
        var resposta4 = pergunta_4.value
        var resposta5 = pergunta_5.value

        var totalAcertos = 0
        var totalErros = 0

        var corR1 = document.getElementById('pergunta_1')
        var corR2 = document.getElementById('pergunta_2')
        var corR3 = document.getElementById('pergunta_3')
        var corR4 = document.getElementById('pergunta_4')
        var corR5 = document.getElementById('pergunta_5')

        if (resposta1 == "" || resposta2 == "" || resposta3 == "" || resposta4 == "" || resposta5 == "") {
            alert("Preença todos os campos!!")
        }

        else {
            if (resposta1 == 1) {
                totalAcertos++
                corR1.style.backgroundColor = 'green'
            }
            else {
                totalErros++
                corR1.style.backgroundColor = 'red'
            }
            if (resposta2 == 1) {
                totalAcertos++
                corR2.style.backgroundColor = 'green'
            }
            else {
                totalErros++
                corR2.style.backgroundColor = 'red'
            }
            if (resposta3 == 1) {
                totalAcertos++
                corR3.style.backgroundColor = 'green'
            }
            else {
                totalErros++
                corR3.style.backgroundColor = 'red'
            }
            if (resposta4 == 1) {
                totalAcertos++
                corR4.style.backgroundColor = 'green'
            }
            else {
                totalErros++
                corR4.style.backgroundColor = 'red'
            }
            if (resposta5 == 1) {
                totalAcertos++
                corR5.style.backgroundColor = 'green'
            }
            else {
                totalErros++
                corR5.style.backgroundColor = 'red'
            }


            var respostaQ = document.getElementById('RespostaQ')
         if (respostaQ.style.display == 'none') {

            respostaQ.style.display = 'block'
         }
         else {
            respostaQ.style.display = 'none'
         }

           
            console.log(` Acertos ${totalAcertos} erros ${totalErros} porcentagem ${totalAcertos / 5 * 100}`)


            // Enviando o valor da nova input
            fetch("/quiz/concluir", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json"
                },
                body: JSON.stringify({
                    // crie um atributo que recebe o valor recuperado aqui
                    // Agora vá para o arquivo routes/usuario.js
                    totalAcertosSever: totalAcertos,
                    totalErros: totalErros,
                    fkUsuarioServer: sessionStorage.ID_USUARIO
                })
            }).then(function (resposta) {

                console.log("resposta: ", resposta);

                if (resposta.ok) {
                    cardErro.style.display = "block";
                    mensagem_erro.innerHTML = "Foi"
                    limparFormulario();
                    finalizarAguardar();
                } else {
                    throw ("Não foi");
                }
            }).catch(function (resposta) {
                console.log(`#ERRO: ${resposta}`);
                finalizarAguardar();
            });

            return false;
        }

        function sumirMensagem() {
            cardErro.style.display = "none"

        }
    }

</script>